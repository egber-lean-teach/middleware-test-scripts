"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractGoogleAITokenCounts = extractGoogleAITokenCounts;
const Logger_1 = require("../models/Logger");
const safeExtract_1 = require("./safeExtract");
function extractGoogleAITokenCounts(response) {
    var _a;
    try {
        const usageMetadata = response.usageMetadata || ((_a = response.response) === null || _a === void 0 ? void 0 : _a.usageMetadata);
        if (!usageMetadata)
            return { inputTokens: 0, outputTokens: 0, totalTokens: 0 };
        const inputTokens = safeExtract_1.safeExtract.number(usageMetadata, "promptTokenCount");
        const outputTokens = safeExtract_1.safeExtract.number(usageMetadata, "candidatesTokenCount");
        const totalTokens = safeExtract_1.safeExtract.number(usageMetadata, "totalTokenCount");
        return {
            inputTokens,
            outputTokens,
            totalTokens,
            cachedTokens: 0,
            reasoningTokens: 0,
        };
    }
    catch (error) {
        Logger_1.logger.warning("Failed to extract Google AI token counts:", error);
        return { inputTokens: 0, outputTokens: 0, totalTokens: 0 };
    }
}
//# sourceMappingURL=extractGoogleAITokenCounts.js.map